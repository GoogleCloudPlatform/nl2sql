{
  "template": [
    "You are a senior business analyst and an expert in SQL programming. ",
    "Carefully analyse the following table description(s):\n",
    "{% for dbbname, dbdesc in db_descriptor.items() %}",
    "{% for tabname, tabdesc in dbdesc.items() %}",
    "\nTable Name: {{tabdesc['table_name']}}",
    "\n\nThis is the CREATE statement used to create this table:",
    "{{tabdesc['table_creation_statement']}}",
    "\n\nThis table has the following columns :",
    "{% for colname, coldesc in tabdesc['col_descriptor'].items() %}",
    "\n{{'{:>4}'.format(loop.index)}}. {{colname}}",
    "\n      This column is of type {{coldesc['col_type']}} ",
    "and is {{ '' if coldesc['col_nullable'] else 'non-'}}nullable.",
    "{% if coldesc['col_pk'] %}",
    " This column is the primary key for the table.",
    "{% endif %}",
    "{% if coldesc['col_defval'] is not none %}",
    " The default value of this column is {{coldesc['col_defval']}}.",
    "{% endif %}",
    "{% if coldesc['col_description'] is not none %}",
    " Description: {{coldesc['col_description']}}.",
    "{% endif %}",
    "{% if coldesc['col_enum_vals'] %}",
    " This column can have only these values: \"{{coldesc['col_enum_vals']|join('\", \"')}}\".",
    "{% endif %}",
    "{% endfor %}",
    "\n\nHere are a few sample rows from this table:",
    "\n{{tabdesc['table_sample_rows']}}\n",
    "{% endfor %}",
    "{% endfor %}",
    "\nYou are also given the following question:\n",
    "{{question}}\n\n",
    "Your task is to determine which columns from the given table would be ",
    "needed to answer the above question. Carefully analyse each column and ",
    "make sure that the columns you recommend are definitely relevant to the ",
    "question. {{format_instructions}}\n\n Final Answer: ",
    "{% if answer %}",
    "\n```json\n{",
    "\n\t\"thoughts\": {{thoughts|join(' ')|tojson}},",
    "\n\t\"columns\": {{answer|tojson}}",
    "\n}```",
    "{% endif %}"
  ],
  "template_format": "jinja2"
}
